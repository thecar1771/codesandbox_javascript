<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <style>table {
      border-collapse: collapse;
    }
    td {
      border : 1px solid #bbb;
      text-align : center;
      line-height : 20px;
      width : 20px;
      height : 20px;
      background : #888;
    }
    td.opened { background: white;}
    td.flag { background : red;}
    td.quetion { background : orange; }</style>
</head>
<body>
<table id="table">
  <tbody>
  </tbody>
</table>
<div id="result"></div>

<script>var $tbody = document.querySelector('#table tbody');
var $result = document.querySelector('#result');
var row = 10; // 
var cell = 10;
var mine = 10;
var CODE = {
  NORMAL: -1,
  QUESTION: -2,
  FLAG: -3,
  QUESTION_MINE: -4,
  FLAG_MINE: -5,
  MINE: -6,
  OPENED: 0
};
var data;
function plantMine() {
  //테이블 판 생성
  var candidate = Array(row * cell).fill().map(function (arr, i) {
    return i;
  });
  var shuffle = [];
  while (candidate.length > row * cell - mine) {
    var chosen = candidate.splice(Math.floor(Math.random() * candidate.length), 1)[0];
    shuffle.push(chosen);
  }
  var data = [];
  for (var i = 0; i < row; ++i) {
    var rowData = [];
    data.push(rowData);
    for (var j = 0; j < cell; ++j) {
      rowData.push(CODE.NORMAL);
    }
  }
}
function drawTable() {
  data = plantMine();
  data.forEach(function (rows) {
    var $tr = document.createElement('tr');
    rows.forEach(function (cell) {
      var $td = document.createElement('td');
      if (cell === CODE.MINE) {
        $td.textContent = 'X';
      }
      $td.textContent = '0';
      $tr.append($td);
    });
    $tbody.append($tr);
  });
}
drawTable();</script>
</body>
</html>
